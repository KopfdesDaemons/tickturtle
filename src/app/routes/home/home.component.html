<app-header></app-header>
<h1>time tracking</h1>
<div class="homeContainer">
    <div class="gridNewTask">
        <span>add new task:</span>
        <form [formGroup]="newTaskForm" class="kachel">
            <div class="inputfeld" id="newTask">
                <input #newTaskInput formControlName="newTask" type="text" id="newTaskInput" spellcheck="false"
                    placeholder="&nbsp;">
                <label class="placeholder" for="newTaskInput">task name</label>
            </div>
            <button (click)="addTask()" [disabled]="isButtonDisabled">&plus;</button>
        </form>
    </div>
    <div class="gridTasks">
        <span *ngIf="ts.getCurrentTask()">current task:</span>
        <div *ngIf="ts.getCurrentTask()" class="currentTaskDiv kachel">
            <span>{{ts.getCurrentTask()?.name}}</span>
            <span>{{ts.getCurrentTask()?.time?.value}}</span>
        </div>
        <div *ngIf="ts.getTasks().length > 0" class="tasksDiv kachel">
            <table>
                <thead>
                    <th>Task</th>
                    <th>Time</th>
                </thead>
                <tbody>
                    <tr *ngFor="let task of ts.getTasks()">
                        <td class="tdTaskName">
                            <div class="tdDiv">
                                <span [hidden]="task.editMode"
                                    (click)="editModeTaskName(task, $event.currentTarget)">{{task.name}}</span>
                                <div class="editDiv" *ngIf="task.editMode">
                                    <div class="inputfeld">
                                        <input type="text" id="editTaskName" value="{{task.name}}" #editTaskNameInput
                                            (keyup.enter)="editTaskName(task, editTaskNameInput.value)">
                                        <label for="editTaskName"></label>
                                    </div>
                                    <button *ngIf="task.editMode" (click)="editTaskName(task, editTaskNameInput.value)"
                                        class="editBtn">
                                        <fa-icon [icon]="faCheck"></fa-icon>
                                    </button>
                                </div>
                                <button (click)="deleteTask(task)" class="deleteBtn">
                                    <fa-icon [icon]="faXmark"></fa-icon>
                                </button>
                            </div>
                        </td>
                        <td class="tdTime">
                            <span>
                                {{task.time.value}}
                            </span>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>